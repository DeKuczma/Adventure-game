// room script file

int items_to_collect = 6;

function room_Load()
{
    walkingChannel = aWalking_in_snow.Play();
    walkingChannel.Stop();
    backgroundChannel = aScene_1___Beach_theme.Play();
    //cFabien.ChangeRoom(2, 750,  620);
}

function podnies(){
  cFabien.Say("O, to szybciutko do plecaczka wrzuc$, mo+e do zupki jeszcze co* dorzuc$.", eBlock);
}
function czy_wszystkie_przedmioty(){
  if (items_to_collect != 0){
    //cFabien.Say(String.Format("Zostaly %d itemy do zebrania", items_to_collect), eBlock);
  }
  else {
     cFabien.Say("Grunt, +e sk%adniki wszystkie mam przy sobie, wi$c czym pr$dzej do druida wyruszam w drog$.",  eBlock);
  }
}

function oWloszczyzna_Interact()
{
  items_to_collect--;
  podnies();
  cFabien.Walk(200, 750,  eBlock,  eWalkableAreas);
  oWloszczyzna.Visible = false;
  cFabien.AddInventory(iWloszczyzna); 
  aPick_up_item.Play();
  czy_wszystkie_przedmioty();
}

function oOgorek_Interact()
{
  items_to_collect--;
  podnies();
  cFabien.Walk(200, 750,  eBlock,  eWalkableAreas);
  oOgorek.Visible = false;
  cFabien.AddInventory(iOgorek);
  aPick_up_item.Play();
  czy_wszystkie_przedmioty();
}

function oLisc_Interact()
{
  items_to_collect--;
  podnies();
  cFabien.Walk(550, 750,  eBlock,  eWalkableAreas);
  oLisc.Visible = false;
  cFabien.AddInventory(iLisc); 
  aPick_up_item.Play();
  czy_wszystkie_przedmioty();
}

function oKoper_Interact()
{
  items_to_collect--;
  podnies();
  cFabien.Walk(700, 750,  eBlock,  eWalkableAreas);
  oKoper.Visible = false;
  cFabien.AddInventory(iKoper); 
  aPick_up_item.Play();
  czy_wszystkie_przedmioty();
}

function oKostka_Interact()
{
  items_to_collect--;
  podnies();
  cFabien.Walk(850, 750,  eBlock,  eWalkableAreas);
  oKostka.Visible = false;
  cFabien.AddInventory(iKostka);
  aPick_up_item.Play();
  czy_wszystkie_przedmioty();
}

function oZiemniaki_Interact()
{
  podnies();
  items_to_collect--;
  cFabien.Walk(1050, 750,  eBlock,  eWalkableAreas);
  oZiemniaki.Visible = false;
  cFabien.AddInventory(iZiemniaki); 
  aPick_up_item.Play();
  czy_wszystkie_przedmioty();
}

function hChatka_Interact()
{ 
  
  cFabien.Say("Stoi sobie chatka, tutaj Druid mieszka, p$dz$ wi$c do niego, czeka m'j kole+ka.", eBlock);
  if(items_to_collect != 0){
    //cFabien.Say("Jeszczenie zebralem wszystkich skladnikow. Nie Moge isc do druida.");
  }
  else {
    cFabien.Walk(1150,  600,  eBlock, eWalkableAreas);
    backgroundChannel.Stop();
    cFabien.LoseInventory(iWloszczyzna);
    cFabien.LoseInventory(iOgorek);
    cFabien.LoseInventory(iKoper);
    cFabien.LoseInventory(iLisc);
    cFabien.LoseInventory(iKostka);
    cFabien.LoseInventory(iZiemniaki);
    cFabien.LoseInventory(iJogurt);
    cFabien.ChangeRoom(2, 750,  620);
  }
}
function room_RepExec()
{
  if(cFabien.Moving && walkingSound == false){
    walkingChannel = aWalking_in_snow.Play();
    walkingSound = true;
  }
  else if (!cFabien.Moving){
    walkingSound = false;
    walkingChannel.Stop();
  }
}

function room_AfterFadeIn()
{
  dWelcomeText.Start();
}
