// room script file

bool axeCollected = false;

function room_Load(){
  RemoveWalkableArea(3);
}

function enter_AfterFadeIn(){
  mouse.Mode = eModeWalkto;
  RemoveWalkableArea(3);
}

function repeatedly_execute_always() {
  if (oDoorClosed.Visible == true){
    RemoveWalkableArea(3);
  }
}

function oDoorClosed_AnyClick()
{
  if(cFabien.ActiveInventory != null){
    if(cFabien.ActiveInventory == iSiekiera){
      cFabien.AddInventory(iDrewno);
      oDoorClosed.Visible = false;
      RestoreWalkableArea(3);
      mouse.Mode = eModeWalkto;
      cFabien.ActiveInventory = null;
    }
  }
  else{
    mouse.Mode = eModeWalkto;
    cFabien.Walk(3020, 680,  eBlock,  eWalkableAreas);
    RestoreWalkableArea(3);
    oOpenDoors.Visible = true;
    oDoorClosed.Visible = false;
  }
}

function oOpenDoors_AnyClick()
{
   if(cFabien.ActiveInventory != null){
    if(cFabien.ActiveInventory == iSiekiera){
      cFabien.AddInventory(iDrewno);
      oOpenDoors.Visible = false;
      mouse.Mode = eModeWalkto;
      cFabien.ActiveInventory = null;
    }
  }
  else{
    mouse.Mode = eModeWalkto;
    cFabien.Walk(3020, 680,  eBlock,  eWalkableAreas);
    RemoveWalkableArea(3);
    oOpenDoors.Visible = false;
    oDoorClosed.Visible = true;
  }
}

function oSkrzyniaZ_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(2940, 680,  eBlock,  eWalkableAreas);
  oSkrzyniaZ.Visible = false;
  oSkrzyniaO.Visible = true;
}

function OGarnek_AnyClick()
{
  if(oOpenDoors.Visible == true || axeCollected == true){
    mouse.Mode = eModeWalkto;
    cFabien.Walk(3300, 680,  eBlock,  eWalkableAreas);
    oSchody.Visible = false;
    OGarnek.Visible = false;
    cFabien.AddInventory(iGarnek);
  }
}

function oSiekiera_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(680, 680,  eBlock,  eWalkableAreas);
  oSiekiera.Visible = false;
  cFabien.AddInventory(iSiekiera);
  axeCollected = true;
}

function oFiranki_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(2550, 680,  eBlock,  eWalkableAreas);
  oFiranki.Visible = false;
}
