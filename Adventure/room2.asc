// room script file

bool zebranaChochla = false;
bool woodCollected = false;
bool filizankaCollected = false;
bool placedWood = false;
bool placedPot = false;
bool setFire = false;

function room_Load(){
  RemoveWalkableArea(3);
}

function room_AfterFadeIn(){
  mouse.Mode = eModeWalkto;
  RemoveWalkableArea(3);
}


function oDoorClosed_AnyClick()
{
  if(cFabien.ActiveInventory != null){
    if(cFabien.ActiveInventory == iSiekiera){
      cFabien.AddInventory(iDrewno);
      oDoorClosed.Visible = false;
      RestoreWalkableArea(3);
      mouse.Mode = eModeWalkto;
      cFabien.ActiveInventory = null;
      woodCollected = true;
      collectedItems++;
    }
  }
  else{
    mouse.Mode = eModeWalkto;
    cFabien.Walk(3020, 620,  eBlock,  eWalkableAreas);
    RestoreWalkableArea(3);
    oOpenDoors.Visible = true;
    oDoorClosed.Visible = false;
  }
}

function oOpenDoors_AnyClick()
{
   if(cFabien.ActiveInventory != null){
    if(cFabien.ActiveInventory == iSiekiera){
      cFabien.AddInventory(iDrewno);
      collectedItems++;
      oOpenDoors.Visible = false;
      mouse.Mode = eModeWalkto;
      cFabien.ActiveInventory = null;
      woodCollected = true;
    }
   else{
     cFabien.ActiveInventory = null;
     mouse.Mode = eModeInteract;
   }
  }
  else{
    mouse.Mode = eModeWalkto;
    cFabien.Walk(3020, 620,  eBlock,  eWalkableAreas);
    RemoveWalkableArea(3);
    oOpenDoors.Visible = false;
    oDoorClosed.Visible = true;
  }
}

function oSkrzyniaZ_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(2940, 620,  eBlock,  eWalkableAreas);
  oSkrzyniaZ.Visible = false;
  oSkrzyniaO.Visible = true;
  if(filizankaCollected == false){
    filizankaCollected = true;
    cFabien.AddInventory(iFilizanka);
    collectedItems++;
  }
}

function OGarnek_AnyClick()
{
  if(oOpenDoors.Visible == true || woodCollected == true){
    mouse.Mode = eModeWalkto;
    cFabien.Walk(3300, 620,  eBlock,  eWalkableAreas);
    oSchody.Visible = false;
    OGarnek.Visible = false;
    cFabien.AddInventory(iGarnek);
    collectedItems++;
  }
}

function oSiekiera_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(680, 620,  eBlock,  eWalkableAreas);
  oSiekiera.Visible = false;
  cFabien.AddInventory(iSiekiera);
  collectedItems++;
}

function oFiranki_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(2550, 620,  eBlock,  eWalkableAreas);
  oFiranki.Visible = false;
  cFabien.AddInventory(iFiranki);
  collectedItems++;
}

function oDuzaSkrzyniaZ_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(2400,  620,  eBlock,  eWalkableAreas);
  oDuzaSkrzyniaO.Visible = true;
  oDuzaSkrzyniaZ.Visible = false;
  if (zebranaChochla == false){
    zebranaChochla = true;
    cFabien.AddInventory(iChochla);
    collectedItems++;
  }
}

function oDuzaSkrzyniaO_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(2400,  620,  eBlock,  eWalkableAreas);
  oDuzaSkrzyniaO.Visible = false;
  oDuzaSkrzyniaZ.Visible = true;
}

function oSkrzyniaO_AnyClick()
{
  mouse.Mode = eModeWalkto;
  cFabien.Walk(2940, 620,  eBlock,  eWalkableAreas);
  oSkrzyniaZ.Visible = true;
  oSkrzyniaO.Visible = false;
}


function hHotspot1_UseInv()
{
  if(collectedItems == 7){
    if(placedWood == false){
      if(cFabien.ActiveInventory != null)
        Display(cFabien.ActiveInventory.Name);
      else
        Display("null");
      if (cFabien.ActiveInventory == iDrewno){
        oDrewno.Visible = true;
        cFabien.ActiveInventory = null;
        cFabien.LoseInventory(iDrewno);
        mouse.Mode = eModeInteract;
      }
      else{
        cFabien.ActiveInventory = null;
        mouse.Mode = eModeInteract;
        cFabien.Say("Najpierw drewno");
      }
    }
  }
}

function hHotspot1_Interact()
{
  if(collectedItems < 7){
    cFabien.Say(String.Format("Nie mam wszystkich itemkow %d", collectedItems));
  }
  else if(collectedItems == 7){
    cFabien.Say("Mog$ ju+ gotowa# zupe");
  }
}
